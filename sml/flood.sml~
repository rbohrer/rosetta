datatype color = Black | White
type image = color array array

fun listToImage (LL : int list list) =
    Array.tabulate(List.length LL,
     fn i => Array.tabulate (List.length (hd LL),
       fn j => List.nth(List.nth(LL,i),j)))

fun fill (img : image) (c : color) ((x,y) : int * int) : unit =
    if x < 0 orelse y < 0 orelse y >= Array.length img then
        ()
    else
        let
            val row = Array.sub (img,y)
        in
            if x >= Array.length row then
                ()
            else
                let
                    val c' = Array.sub (row,x)
                    val () = Array.update(row,x,c)
                in
                    if c <> c' then
                        List.app (fill img c) [(x,y-1), (x,y+1), (x-1,y), (x+1,y)]
                    else
                        ()
                end

        end
